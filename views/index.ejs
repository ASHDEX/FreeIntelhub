<%- include('partials/head') %>

<section class="hero">
  <h1>Threat Intelligence Feed</h1>
  <p>Aggregating <%= totalCount %> articles from trusted cybersecurity sources</p>
  <div class="search-box">
    <form action="/search" method="GET" autocomplete="off">
      <div class="search-wrapper">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        <input type="text" id="hero-search" name="q" placeholder="Search threats, vendors, CVEs..." value="">
        <kbd class="search-hint">/</kbd>
      </div>
    </form>
    <div class="suggestions" id="suggestions"></div>
  </div>
</section>

<section class="stats-row">
  <% categories.slice(0, 6).forEach(function(c) { %>
    <a href="/category/<%= encodeURIComponent(c.category) %>" class="stat-card">
      <strong><%= c.count %></strong>
      <span><%= c.category %></span>
    </a>
  <% }); %>
</section>

<% if (vendors.length > 0) { %>
<section class="vendor-bar">
  <h2>Trending Vendors</h2>
  <div class="vendor-tags">
    <% vendors.slice(0, 15).forEach(function(v) { %>
      <a href="/vendor/<%= encodeURIComponent(v.vendor) %>" class="badge badge-vendor"><%= v.vendor %> (<%= v.count %>)</a>
    <% }); %>
  </div>
</section>
<% } %>

<section>
  <div class="section-header">
    <h2>Latest News</h2>
  </div>
  <%- include('partials/articleList', { articles }) %>
  <%- include('partials/pagination', { page: newsPage, pages: newsPages, baseUrl: '/?section=news' }) %>
</section>

<section>
  <div class="section-header">
    <h2>Data Breaches</h2>
  </div>
  <%- include('partials/articleList', { articles: breachArticles }) %>
  <%- include('partials/pagination', { page: breachPage, pages: breachPages, baseUrl: '/?section=breaches' }) %>
</section>

<%- include('partials/footer') %>
