<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FreeIntel Hub â€“ Your daily dose of cyber</title>
  <link rel="stylesheet" href="/css/style.css"/>
</head>
<body>

  <section class="hero container">
    <h1>Your daily dose of cyber</h1>
    <p>Track the latest cybersecurity news, breaches, and critical vulnerabilities in one place.</p>

    <form class="search-bar" action="/search" method="GET">
      <input type="text" name="q" placeholder="Search CVEs, vendors, breaches..." />
      <button type="submit">Search</button>
    </form>
  </section>

  <!-- CVE Ticker -->
  <div class="ticker">
    <div class="ticker-track">
      <% feeds.slice(0, 10).forEach(f => { %>
        <div class="ticker-item">
          ðŸš¨ <a href="<%= f.link %>" target="_blank"><%= f.title %></a>
        </div>
      <% }) %>
    </div>
  </div>

  <main class="container">
    <div class="grid">
      <!-- Latest Cyber News -->
      <section class="card">
        <h3>Latest Cyber News</h3>
        <% feeds.slice(0, 12).forEach(f => { %>
          <div class="feed-item">
            <a href="<%= f.link %>" target="_blank"><%= f.title %></a>
            <div class="meta"><%= f.vendor %> Â· <%= f.published || "Recent" %></div>
          </div>
        <% }) %>
      </section>

      <!-- Data Breaches -->
      <section class="card">
        <h3>Data Breaches</h3>
        <% feeds.filter(f => /breach|leak|exposed|ransom|incident/i.test(f.title)).slice(0, 12).forEach(f => { %>
          <div class="feed-item">
            <a href="<%= f.link %>" target="_blank"><%= f.title %></a>
            <div class="meta"><%= f.vendor %> Â· <%= f.published || "Recent" %></div>
          </div>
        <% }) %>

        <% if (!feeds.some(f => /breach|leak|exposed|ransom|incident/i.test(f.title))) { %>
          <p style="color:#9aa4b2">No recent breach-related news detected yet.</p>
        <% } %>
      </section>
    </div>
  </main>

</body>
</html>
